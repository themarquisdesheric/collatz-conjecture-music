(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{18:function(e,t,a){e.exports=a(39)},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),s=a.n(r);var o=()=>l.a.createElement("header",null,l.a.createElement("h2",null,"Collatz Music"),l.a.createElement("hr",null)),i=a(9),c=a.n(i),h=a(1),d=a.n(h);d.a.number;const u=d.a.string,m=(d.a.func,d.a.arrayOf,d.a.bool,d.a.node);class p extends n.Component{componentDidMount(){const e=this.props.data,t=this.updateChart(e),a=new c.a(this.canvas,{type:"line",data:t,options:{title:{display:!0,text:"Distribution of even and odd numbers",fontFamily:"Oswald",fontSize:14,fontColor:"#eee"},legend:{labels:{fontFamily:"Oswald",fontSize:14,fontColor:"#eee"}}}});this.chart=a}shouldComponentUpdate(e){return this.props.data!==e.data}componentDidUpdate(){const e=this.chart,t=this.props.data;e.data=this.updateChart(t),e.update()}componentWillUnmount(){this.chart.destroy()}updateChart(e){const t=e.map(e=>e%2===0?e:0),a=e.map(e=>e%2===0?0:e);return{labels:e,datasets:[{label:"even",data:t,backgroundColor:"rgba(0, 255, 255, .6)",borderColor:"rgba(0, 255, 255, 1)",borderWidth:1},{label:"odd",data:a,backgroundColor:"rgba(255, 0, 255, .6)",borderColor:"rgba(255, 0, 255, 1)",borderWidth:1}]}}render(){return l.a.createElement("div",{className:"chart"},l.a.createElement("div",null,l.a.createElement("canvas",{ref:e=>this.canvas=e})))}}class E extends n.Component{constructor(...e){super(...e),this.state={hover:!1},this.toggleHover=()=>{this.setState({hover:!this.state.hover})}}render(){return l.a.createElement("div",{onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},this.props.children({hover:this.state.hover}))}}const v=({num:e})=>e%2===0?l.a.createElement(n.Fragment,null,l.a.createElement("span",{className:"even"},e," is even")," so we divide by 2"):l.a.createElement(n.Fragment,null,l.a.createElement("span",{className:"odd"},e," is odd")," so we multiply by 3, then add 1");class g extends n.Component{render(){const e=this.props,t=e.hover,a=e.num,n=e.finalVal,r=t?"scale(1.1)":"";return l.a.createElement("li",{style:{transform:r}},n?l.a.createElement("span",{className:"odd"},a," has been reached"):l.a.createElement(v,{num:a}))}}const b=e=>l.a.createElement(E,null,({hover:t})=>l.a.createElement(g,Object.assign({},e,{hover:t})));var y=({sequence:e})=>l.a.createElement("div",{className:"sequence-list"},l.a.createElement("ul",null,e.map((t,a)=>a===e.length-1?l.a.createElement(b,{num:t,finalVal:!0,key:t}):l.a.createElement(b,{num:t,key:t}))));var w=({sequence:e})=>l.a.createElement(n.Fragment,null,l.a.createElement(p,{data:e}),l.a.createElement(y,{sequence:e}));var C=()=>l.a.createElement("div",{className:"intro-blurb"},l.a.createElement("ul",null,l.a.createElement("li",null,"The",l.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Collatz_conjecture",target:"_blank",rel:"noopener noreferrer"},"Collatz Conjecture"),"is an unsolved problem in mathematics."),l.a.createElement("li",null,"It states that given any positive integer, the sequence will always reach 1 by following two rules:"),l.a.createElement("li",{className:"italics"},"If the integer is even, divide it by 2"),l.a.createElement("li",{className:"italics"},"Otherwise multiply it by 3 and add 1"),l.a.createElement("li",null,"Then repeat the process until you reach 1")));var f=({sequence:e})=>l.a.createElement(n.Fragment,null,l.a.createElement("main",null,e.length?l.a.createElement(w,{sequence:e}):l.a.createElement(C,null)),!e.length&&l.a.createElement(n.Fragment,null,l.a.createElement("hr",null),l.a.createElement("p",{className:"pattern-sound"},"But how might the resulting pattern sound?",l.a.createElement("br",null)),l.a.createElement("p",{className:"thinking-emoji"},l.a.createElement("span",{role:"img","aria-label":"thinking emoji"},"\ud83e\udd14")),l.a.createElement("small",null,"(make sure your speakers are on, but not too loud)"))),k=a(10),q=a.n(k),S=a(11),D=a(12),P=a(15),I=a.n(P),x=a(16),z=a.n(x);function N(){const e=Object(S.a)(["\n    font-size: 3em;\n    position: fixed;\n    ",": 2%;\n    top: 75%;\n  \n    @media (min-width: 700px) {\n      top: 60%;\n      ",": 8%;\n    }\n  "]);return N=function(){return e},e}const j=(e,t)=>Object(D.a)(t)(N(),e,e);j.propTypes={direction:u.isRequired,component:m.isRequired};const F=j("left",I.a),V=j("right",z.a),W=({left:e,handleClick:t})=>l.a.createElement(E,null,({hover:a})=>{const n=a?"#eee":"rgba(238, 238, 238, .5)";return l.a.createElement("div",{style:{color:n}},e?l.a.createElement(F,{onClick:t}):l.a.createElement(V,{onClick:t}))});var _=({handleIncrement:e,handleDecrement:t})=>l.a.createElement(n.Fragment,null,l.a.createElement(W,{left:!0,handleClick:t}),l.a.createElement(W,{left:!1,handleClick:e}));const O=["sine","sawtooth","triangle","square"];var M=({label:e,wave:t,onChange:a})=>l.a.createElement("label",null,e,l.a.createElement("div",null,t),l.a.createElement("select",{value:t,onChange:a},O.map(e=>l.a.createElement("option",{key:e,value:e},e))));class R extends n.Component{constructor(...e){super(...e),this.state={startVal:0},this.handleSubmit=e=>{const t=this.props,a=t.isPlaying,n=t.handlePlaybackEnd,l=t.handleRepeat,r=Number(this.input.value);e.preventDefault(),a&&n(),r<2?alert("You must enter a number greater than 1"):r===this.state.startVal?l(r):this.setState({startVal:r})},this.handleKeyDown=({key:e})=>{document.activeElement!==this.input&&("ArrowLeft"===e?this.handleDecrement():"ArrowRight"===e&&this.handleIncrement())},this.handleInput=e=>{this.props.isPlaying&&this.props.handlePlaybackEnd(),this.input.value=e,this.setState({startVal:e})},this.handleIncrement=()=>{const e=this.state.startVal+1;window.gtag("event","Increment Collatz",{event_category:"Collatz Conjecture",event_label:e,value:1}),this.handleInput(e)},this.handleDecrement=()=>{const e=this.state.startVal,t=e-1;e<=2?alert("You must enter a number greater than 1"):(window.gtag("event","Decrement Collatz",{event_category:"Collatz Conjecture",event_label:t,value:1}),this.handleInput(t))}}componentDidMount(){window.addEventListener("keydown",this.handleKeyDown),this.input.focus()}componentDidUpdate(e,t){const a=this.state.startVal;t.startVal!==a&&(this.props.handleCollatz(a),window.scrollTo(0,0))}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown)}render(){const e=this.props,t=e.wave,a=e.handleWave,r=e.sequence,s=e.isPlaying;return l.a.createElement(n.Fragment,null,!!r.length&&l.a.createElement(_,{handleIncrement:this.handleIncrement,handleDecrement:this.handleDecrement}),l.a.createElement("div",{className:"controls-wrapper"},l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Start value",l.a.createElement("input",{type:"number",defaultValue:this.state.startVal||15,ref:e=>this.input=e})),l.a.createElement(M,{label:"Wave type",wave:t,onChange:a}),l.a.createElement("span",{className:"button-wrapper"},l.a.createElement("button",{type:"submit"},s?l.a.createElement(q.a,{color:"#f0f",height:10,width:2,margin:"1px"}):"\u25b7 Play")))))}}class T extends n.Component{constructor(...e){super(...e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(){setTimeout(()=>this.props.handleError(),2500)}render(){return this.state.hasError?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"error-modal"},l.a.createElement("h1",null,"Aw, crap",l.a.createElement("span",{role:"img","aria-label":"dead emoji"}," \ud83d\ude35")),"If this keeps happening, please reload"),";"):this.props.children}}var U=a(17);const A=(e,t=880,a=9e3)=>{const n=Math.min(...e),l=Math.max(...e);return e.map(e=>(a-t)*(e-n)/(l-n)+t)};class L extends n.Component{constructor(...e){super(...e),this.playSequence=()=>{const e=this.props,t=e.scaledSequence,a=e.handlePlaybackEnd;let n=0;t.length&&(this.intervalID=setInterval(()=>{n===t.length?(clearInterval(this.intervalID),a()):(this.osc.frequency.value=t[n],n++)},300))}}componentDidMount(){const e=((e,t=0,a=new(window.AudioContext||window.webkitAudioContext))=>{const n=a.createOscillator();return n.type=e,n.connect(a.destination),n.start(),n.frequency.value=t,[n,a]})(this.props.wave),t=Object(U.a)(e,2),a=t[0],n=t[1];this.osc=a,this.audioCtx=n,this.playSequence()}componentWillUnmount(){clearInterval(this.intervalID),this.osc.disconnect(this.audioCtx.destination),this.audioCtx.close()}render(){return null}}var H=()=>l.a.createElement("footer",null,l.a.createElement("hr",null),l.a.createElement("small",null,"\xa9",l.a.createElement("a",{href:"https://www.whoisyuval.com",target:"_blank",rel:"noopener noreferrer"},"yuval allweil"),(new Date).getFullYear()));class K extends n.Component{constructor(...e){super(...e),this.state={sequence:[],scaledSequence:null,wave:"sine",isPlaying:!1},this.handleWave=({target:e})=>{const t=e.value;window.gtag("event","Update Wave Type",{event_category:"Collatz Conjecture",event_label:t,value:1}),this.setState({wave:t})},this.handleCollatz=e=>{const t=(e=>{const t=[e];for(;e>1;)e%2===0?e/=2:e=3*e+1,t.push(e);return t})(e);window.gtag("event","Calculate Collatz",{event_category:"Collatz Conjecture",event_label:e,value:1}),this.setState({sequence:t,scaledSequence:A(t),isPlaying:!0})},this.handlePlaybackStart=()=>{this.setState({isPlaying:!0})},this.handlePlaybackEnd=()=>{this.setState({isPlaying:!1,scaledSequence:null})},this.handleRepeat=e=>{this.setState({sequence:[]},()=>{this.handleCollatz(e)})},this.handleError=()=>{window.scrollTo(0,0),this.handlePlaybackEnd()}}render(){const e=this.state,t=e.sequence,a=e.scaledSequence,n=e.wave,r=e.isPlaying;return l.a.createElement("div",{id:"wrapper"},l.a.createElement(o,null),l.a.createElement(f,{sequence:t}),l.a.createElement(R,{sequence:t,wave:n,handleCollatz:this.handleCollatz,handleWave:this.handleWave,handleRepeat:this.handleRepeat,handlePlaybackEnd:this.handlePlaybackEnd,isPlaying:r}),r&&a&&l.a.createElement(T,{handleError:this.handleError},l.a.createElement(L,{scaledSequence:a,wave:n,handlePlaybackStart:this.handlePlaybackStart,handlePlaybackEnd:this.handlePlaybackEnd})),l.a.createElement(H,null))}}a(38);s.a.render(l.a.createElement(K,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.7a52c400.chunk.js.map